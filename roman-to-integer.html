<!doctype html>
<html>
  <head>
    <title>Roman to integer</title>
  </head>
  <body>
      <h1>Roman to integer</h1>
</body>

<script>
    var romanToInt = function(s) {

        const mapValues = {
            "I":1,
            "V":5,
            "X":10,
            "L":50,
            "C":100,
            "D":500,
            "M":1000,
        }
        
        let list = Array.from(s);

        let numbers = [];

        list.forEach(element => {
            let value = mapValues[element];
            numbers.push(value);
        });


        let sumList = [];

        for (let i = 0; i < numbers.length; i++) {
            let next = numbers[i + 1] ? numbers[i + 1] : 0;
            let before = numbers[i - 1] ? numbers[i - 1] : 0;

            if(numbers[i] >= before) {
                sumList.push(numbers[i]);
            } 
             
            if(next > numbers[i] && numbers.length > 2) {
                let difference = next - numbers[i];
                sumList.push(difference);
                i++
            }
        };

        const sum = (prev, next) => prev + next;
        const diff = (prev, next) => next - prev;

        let final = sumList.reduce(sum);

            if(sumList[0] < sumList[1]) {
                let final = sumList.reduce(diff);
                return final;
            }

        return final;
    };
    romanToInt('MCMXCIV')
    romanToInt('IV');
    romanToInt('III');
    romanToInt('LVIII');
    

</script>
</html>