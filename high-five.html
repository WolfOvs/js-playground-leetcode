<!doctype html>
<html>
  <head>
    <title>High five</title>
  </head>
  <body>
      <h1>High five</h1>
</body>

<script>
    var highFive = function(items) {
        
        let list = items;
        let idList = [];

        for (let i = 0; i < list.length; i++) {
            if(!idList.includes(list[i][0])) {
                idList.push(list[i][0])
            }
        }

        let array = [];

        for (let i = 0; i < idList.length; i++) {
          array.push([idList[i]])
        }

        let arrayResult = array;

        for (let i = 0; i < array.length; i++) {
          for (let x = 0; x < list.length; x++) {
            
            if(list[x][0] === array[i][0]) {
              arrayResult[i].push(list[x][1])
            }
          }
        }

        const reducer = (previousValue, currentValue, currentIndex) => {
            return previousValue + currentValue
        };

        let finalArray = [];

        for (let i = 0; i < arrayResult.length; i++) {
            const copy = arrayResult[i];
            var theRemovedElement = copy.shift();

            var topValues = copy.sort((a, b) => b - a).slice(0, 5);
            
            let value = topValues.reduce(reducer);

            arrayResult[i].push(Math.floor(value / 5))
            arrayResult[i][0] = theRemovedElement;
        }

        function firstAndLast(array) {

          var firstItem = array[0];
          var lastItem = array[array.length - 1];

          var objOutput = [firstItem, lastItem];

        return objOutput;
        }

        let result = [];

         for (let i = 0; i < array.length; i++) {
           result.push(firstAndLast(array[i]))
         }
         console.log('result', result)
        return result;
    };

    highFive([[1,91],[1,92],[2,93],[2,97],[1,60],[2,77],[1,65],[1,87],[1,100],[2,100],[2,76]]);
    //1: 99
</script>
</html>